[build]
  base = "frontend"
  publish = ".next"
  command = "npm ci && npm run build"

[[plugins]]
  package = "@netlify/plugin-nextjs"

[build.environment]
  NODE_VERSION = "20"
  # No longer needed - using Netlify Functions instead of external backend
  # API_URL = "https://dashboard-backend-mo1j.onrender.com/api"
  # API_KEY = "88c090fb868f171d322e9cea5a8484dd10c05975e789a28238f2bb2428b06e84"

[functions]
  directory = "netlify/functions"
  node_bundler = "nft"
  included_files = [
    "netlify/functions/**", 
    "lib/scraper/**",
    "node_modules/puppeteer-extra-plugin-stealth/**"
  ]

# Increase timeout for all functions (max 26s on Pro tier, default 10s)
# Note: This requires Netlify Pro plan. Free tier is limited to 10s.
[functions.timeout]
  value = 26

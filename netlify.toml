[build]
  base = "frontend"
  publish = ".next"
  command = "npm ci && npm run build"

[[plugins]]
  package = "@netlify/plugin-nextjs"

[build.environment]
  NODE_VERSION = "20"
  # No longer needed - using Netlify Functions instead of external backend
  # API_URL = "https://dashboard-backend-mo1j.onrender.com/api"
  # API_KEY = "88c090fb868f171d322e9cea5a8484dd10c05975e789a28238f2bb2428b06e84"

[functions]
  directory = "netlify/functions"
  node_bundler = "nft"  # Node File Trace - better for large dependencies
  # Include all puppeteer-extra-plugin-stealth files
  included_files = [
    "netlify/functions/**", 
    "lib/scraper/**",
    "node_modules/puppeteer-extra-plugin-stealth/**"
  ]
